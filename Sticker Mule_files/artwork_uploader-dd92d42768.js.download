webpackJsonp([2],{0:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}r(1);var o=r(326),a=n(o),i=r(331),u=r(525),l=r(530),s=n(l),c=r(558),d=n(c),f=r(346),p=r(341),h=n(p),v=r(342),m=n(v);r(483);var g=r(531),y=n(g);h.default.App=function(e){var t=h.default.Translation,r=h.default.DefaultTranslation;[r,t].forEach(f.addTranslation);var n=(0,d.default)(e);return h.default.SERVER_RENDER?(0,u.renderToString)(a.default.createElement(s.default,{store:n})):((0,i.render)(a.default.createElement(s.default,{store:n,dispatch:n.dispatch}),m.default.getElementById("artwork_uploader_app")),void n.dispatch(y.default.fetchMasters()))}},530:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=r(376),s=r(531),c=n(s),d=r(507),f=n(d),p=r(326),h=n(p),v=r(454),m=(n(v),r(546)),g=n(m),y=r(556),_=n(y),b=r(554),E=r(349),D=r(452),w=r(557),k=r(548),O=r(345),A="submitted",S="dispatched",P="error",T=function(e){function t(){var e,r,n,i;o(this,t);for(var u=arguments.length,l=Array(u),s=0;s<u;s++)l[s]=arguments[s];return r=n=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),n.state={formState:""},i=r,a(n,i)}return i(t,e),u(t,[{key:"dispatchForm",value:function(e){var t=this.props.store.getState();this.setState({formState:S}),(0,w.processArtwork)(e,t,this.throwError.bind(this))}},{key:"throwError",value:function(){this.setState({formState:P})}},{key:"handleSubmit",value:function(){this.setState({formState:A})}},{key:"componentDidUpdate",value:function(){this.valid()&&this.submitted()&&this.dispatchForm(this.props.dispatch)}},{key:"valid",value:function(){var e=this.props.artworks.uploadedFiles;return(0,b.hasPickedColors)(e,[this.activeArtwork()])&&((0,b.allUploaded)(e)||this.props.selectedMasterId)}},{key:"submitted",value:function(){return this.state.formState===A}},{key:"dispatched",value:function(){return this.state.formState===S}},{key:"uploadError",value:function(){return this.state.formState===P}},{key:"lineItemConfigurationDone",value:function(){return this.submitted()||this.dispatched()}},{key:"hasErrors",value:function(e){return this.lineItemConfigurationDone()&&(0,b.anyFailed)(e)||this.uploadError()}},{key:"activeArtwork",value:function(){var e=this.props,t=e.artworks,r=e.repurposedArtwork;return(0,l.last)(t.uploadedFiles)||r||{type:"empty",id:(0,O.guidGenerator)()}}},{key:"render",value:function(){var e=this.props,t=e.locale,r=e.product,n=e.dispatch,o=e.artworks,a=e.masters,i=e.selectedMasterId,u=(e.repurposedArtwork,e.uploads),s=e.guest,c=o.uploadedFiles,d=(i||!this.lineItemConfigurationDone())&&((0,b.allSelected)(c)||i),f=(0,l.first)(u);return h.default.createElement("div",null,h.default.createElement("div",{id:"artwork_upload_container",className:"enclosed"},h.default.createElement("div",{className:"artwork"},h.default.createElement("div",null,h.default.createElement(g.default,{locale:t,upload:f,artwork:this.activeArtwork(),dispatch:n,product:r,files:c,masters:a,guest:s,lineItemConfigurationDone:this.lineItemConfigurationDone(),filesSelected:(0,b.allSelected)(c),selectedMasterId:i}))),d?this.renderSubmitButton(c):null),h.default.createElement(_.default,{dispatch:n,locale:t,visible:this.hasErrors(c)}))}},{key:"renderSubmitButton",value:function(e){var t=this.props.locale,r=function(e){return(0,k.translate)(e,{locale:t,scope:"artwork_uploader"})};return h.default.createElement("div",{className:"submit-wrapper center-block"},h.default.createElement("button",{type:"button",className:"button large wide primary\n            "+(this.lineItemConfigurationDone()?"loading":"")+"\n          ",disabled:this.submitDisabled(),onClick:this.handleSubmit.bind(this)},r("continue")))}},{key:"submitDisabled",value:function(){return!(0,b.hasPickedColors)(this.props.uploads,[this.activeArtwork()])||this.submitted()}}]),t}(p.Component);T.mixins=[f.default];var R=function(e){return{actions:(0,E.bindActionCreators)(c.default,e)}},I=function(e){return e};t.default=(0,D.connect)(I,R)(T)},531:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateArtwork=t.submitArtworks=t.uploadFile=t.SET_REPURPOSED_ARTWORK=t.MASTERS_LOADED=t.MASTERS_LOADING=t.UPDATE_ARTWORK=t.SUBMIT_ARTWORKS=t.UPLOAD_PROGRESS=t.UPLOAD_SUCCEEDED=t.UPLOAD_FAILED=t.UPLOAD_FILE=void 0;var n=r(532),o=r(534),a=r(539);t.UPLOAD_FILE=o.UPLOAD_FILE,t.UPLOAD_FAILED=o.UPLOAD_FAILED,t.UPLOAD_SUCCEEDED=o.UPLOAD_SUCCEEDED,t.UPLOAD_PROGRESS=o.UPLOAD_PROGRESS,t.SUBMIT_ARTWORKS=a.SUBMIT_ARTWORKS,t.UPDATE_ARTWORK=o.UPDATE_ARTWORK,t.MASTERS_LOADING=n.MASTERS_LOADING,t.MASTERS_LOADED=n.MASTERS_LOADED,t.SET_REPURPOSED_ARTWORK=n.SET_REPURPOSED_ARTWORK,t.uploadFile=o.uploadFile,t.submitArtworks=a.submitArtworks,t.updateArtwork=o.updateArtwork,t.default={uploadFile:o.uploadFile,submitArtworks:a.submitArtworks,updateArtwork:o.updateArtwork,fetchMasters:n.fetchMasters}},532:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.setSelectedMasterId=t.fetchMasters=t.SET_REPURPOSED_ARTWORK=t.SELECTED_MASTER_ID=t.MASTERS_LOADED=t.MASTERS_LOADING=void 0;var o=r(533),a=n(o),i=r(345),u=t.MASTERS_LOADING="MASTERS_LOADING",l=t.MASTERS_LOADED="MASTERS_LOADED",s=t.SELECTED_MASTER_ID="SELECTED_MASTER_ID",c=t.SET_REPURPOSED_ARTWORK="SET_REPURPOSED_ARTWORK";t.fetchMasters=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return function(t,r){var n=r(),o=(n.product,n.userId),i=n.artisanApiOptions;n.productId;o&&i.token&&(t({type:u}),a.default.fetchMasters(o,e,i).then(function(e){t({type:l,masters:e})}).catch(function(e){t({type:l,masters:{nodes:[]}}),console.warn(e)}))}},t.setSelectedMasterId=function(e){return function(t,r){t({type:c,artwork:{id:(0,i.guidGenerator)()}}),t({type:s,masterId:e})}}},533:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.fetchMasters=void 0;var o=r(428),a=n(o),i='\n  query MastersForUser($user_id: ID!, $page: Int) {\n    masters(user_id: $user_id, page: $page, per_page: 10) {\n      totalCount\n      page\n      perPage\n      nodes {\n        id\n        preview { url(style: "small") }\n        artworks {\n          id\n        }\n      }\n    }\n  }',u=function(e){if(e.errors)throw e.errors[0].message;return e.data},l=function(e,t,r){return a.default.post(e.endpoint).set("Accept","application/json").set("Authorization",e.token).set("Content-Type","application/json").send(JSON.stringify({query:t,variables:r})).then(function(e){return JSON.parse(e.text)}).then(u)},s=t.fetchMasters=function(e,t,r){return l(r,i,{user_id:e,page:t}).then(function(e){return e.masters})};t.default={fetchMasters:s}},534:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateArtwork=t.uploadFile=t.UPDATE_ARTWORK=t.UPLOAD_PROGRESS=t.UPLOAD_SUCCEEDED=t.UPLOAD_FAILED=t.UPLOAD_FILE=t.ADD_ARTWORK=void 0;var n=r(535),o=r(538);t.ADD_ARTWORK=n.ADD_ARTWORK,t.UPLOAD_FILE=n.UPLOAD_FILE,t.UPLOAD_FAILED=n.UPLOAD_FAILED,t.UPLOAD_SUCCEEDED=n.UPLOAD_SUCCEEDED,t.UPLOAD_PROGRESS=n.UPLOAD_PROGRESS,t.UPDATE_ARTWORK=o.UPDATE_ARTWORK,t.uploadFile=n.uploadFile,t.updateArtwork=o.updateArtwork,t.default={uploadFile:n.uploadFile,updateArtwork:o.updateArtwork}},535:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uploadFile=t.performUpload=t.types=t.UPDATE_MASTERS=t.ADD_ARTWORK=t.UPLOAD_PROGRESS=t.UPLOAD_SUCCEEDED=t.UPLOAD_FAILED=t.UPLOAD_FILE=void 0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=r(536),a=r(345),i=t.UPLOAD_FILE="UPLOAD_FILE",u=t.UPLOAD_FAILED="UPLOAD_FAILED",l=t.UPLOAD_SUCCEEDED="UPLOAD_SUCCEEDED",s=t.UPLOAD_PROGRESS="UPLOAD_PROGRESS",c=t.ADD_ARTWORK="ADD_ARTWORK",d=(t.UPDATE_MASTERS="UPDATE_MASTERS",t.types=[i,u,l,s,c],t.performUpload=function(e,t,r,a){var c=(0,o.timestampFilename)(e.name),d=r.artworkPath;return a({type:i,file:e,normalizedFileName:c,artworkId:t,artworkPath:d}),(0,o.startUpload)(e,c,n({},r,{success:function(e){return a({type:l,artworkId:t,data:e})},progress:function(e){return a({type:s,artworkId:t,percentage:e})},error:function(e){return a({type:u,artworkId:t,error:e})}}))});t.uploadFile=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,a.guidGenerator)();return function(n,o){var i=o().config,u={awsKey:i.awsKey,awsBucket:i.awsBucket,artworkPath:r};if(!t){t=(0,a.guidGenerator)();var l={id:t,state:"pending",fileName:""};n({type:c,artwork:l})}d(e,t,u,n)}}},538:function(e,t){"use strict";function r(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(t,"__esModule",{value:!0});var n=t.UPDATE_ARTWORK="UPDATE_ARTWORK";t.types=[n],t.updateArtwork=function(e,t,o){var a;return a={type:n},r(a,e,t),r(a,"artworkId",o),a}},539:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.submitArtworks=t.buildReorderCartItem=t.types=t.SUBMIT_ARTWORKS=void 0;var n=r(376),o=r(540),a=r(345),i=t.SUBMIT_ARTWORKS="SUBMIT_ARTWORKS",u=(t.types=[i],t.buildReorderCartItem=function(e,t,r){var n={artwork:{id:t.artwork_id}};return t.color&&(n.color=t.color),{id:(0,a.guidGenerator)(),product:t.storefront_reorder,configuration:n,quantity:r,customSample:!1}}),l=(t.submitArtworks=function(){return function(e,t){var r=l(t());o.actions.addCartItem(r)}},function(e){var t=f(e);return t?u(e,t,e.quantity):e.selectedMasterId?s(e):c(e)}),s=function(e){var t=(0,n.last)(e.artworks.uploadedFiles)||e.repurposedArtwork,r={masterId:e.selectedMasterId,instructions:t.artworkInstructions};t.normalizedFileName&&(0,n.merge)(r,{id:"",fileName:t.normalizedFileName,path:t.artworkPath});var o=d(r,t,e);return{id:(0,a.guidGenerator)(),product:e.product,configuration:o,quantity:e.quantity,customSample:e.sample,variant:e.variant}},c=function(e){var t=(0,n.last)(e.artworks.uploadedFiles)||e.repurposedArtwork,r={masterId:e.selectedMasterId,instructions:t.artworkInstructions};t.normalizedFileName&&(0,n.merge)(r,{id:"",fileName:t.normalizedFileName,path:t.artworkPath});var o=d(r,t,e);return{id:(0,a.guidGenerator)(),product:e.product,configuration:o,quantity:e.quantity,customSample:e.sample,variant:e.variant}},d=function(e,t,r){var n=t.color,o=r.height,a=r.width,i=r.unitsPerRoll;return n?{artwork:e,color:n,height:o,width:a,unitsPerRoll:i}:i?{artwork:e,height:o,width:a,unitsPerRoll:i}:{artwork:e,height:o,width:a}},f=function(e){if(!e.selectedMasterId)return null;var t=(0,n.find)(e.masters.nodes,{id:e.selectedMasterId});return t?(0,n.find)(e.reorderItems,function(r){return h(r,e.repurposedArtwork,e.product.id,t.artworks,e.width,e.height)}):null},p=function(e,t,r,n){var o=function(e,t){return e>=t-n&&e<=t+n};return o(e.width,t)&&o(e.height,r)},h=function(e,t,r,o,a,i){return e.product.id===r&&(!!o.map(function(e){return+e.id}).includes(+e.artwork_id)&&(!!(0,n.isEmpty)(t.artworkInstructions)&&((!e.color||t.color===e.color)&&p(e,a,i,.25))))}},546:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=r(547),s=n(l),c=r(549),d=n(c),f=r(551),p=n(f),h=r(552),v=n(h),m=r(553),g=n(m),y=r(507),_=(n(y),r(326)),b=n(_),E=r(331),D=n(E),w=r(548),k=r(531),O=r(554),A=function(e){function t(e){o(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.state={hovering:!1},r.handleUpload=r.handleUpload.bind(r),r.onDragEnter=r.onDragEnter.bind(r),r.onDragLeave=r.onDragLeave.bind(r),r.onDrop=r.onDrop.bind(r),r.fieldChanged=r.fieldChanged.bind(r),r}return i(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.locale,r=(e.dispatch,e.artwork),n=e.masters,o=e.selectedMasterId,a=e.files,i=function(e){return(0,w.translate)(e,{locale:t,scope:"artwork_uploader"})},u=document.getElementById("skip-step");return u&&(u.style.display=a.length||o?"none":"block"),b.default.createElement(p.default,{onDrop:this.onDrop,disableClick:!0,onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,multiple:!1,className:"dropzone "+(this.state.hovering?" hover":""),ref:"dropzone"},b.default.createElement("div",{className:"drop-here"},b.default.createElement("span",null,i("drop_file_here_to_attach"))),b.default.createElement("form",{action:"#",method:"post",encType:"multipart/form-data",id:"artwork_upload_form_"+r.id,className:"artwork-upload-form"},b.default.createElement(g.default,{id:"artwork_upload",artwork:r,t:i,triggerUpload:this.handleUpload}),!a.length&&n.totalCount?this.renderMasters():null,this.renderFields(this.props,i),this.renderProgressBar(r)))}},{key:"renderProgressBar",value:function(e){if("empty"!==e.type&&this.props.lineItemConfigurationDone&&e.state!==O.STATE_PENDING&&!this.props.selectedMasterId)return b.default.createElement("div",{className:"center-block"},b.default.createElement(v.default,{percent:e.percentage}))}},{key:"renderMasters",value:function(){return b.default.createElement(d.default,this.props)}},{key:"renderFields",value:function(e,t){var r=e.locale,n=e.artwork,o=e.upload,a=e.dispatch,i=e.selectedMasterId;if((this.props.filesSelected||i)&&!this.props.lineItemConfigurationDone&&"empty"!==n.type)return b.default.createElement("div",{className:"artwork-form-fields center-block"},b.default.createElement(s.default,{locale:r,colors:o.colors,artwork:n,dispatch:a}),b.default.createElement("label",{htmlFor:"artwork_instructions_"+n.id},t("labels.instructions")),b.default.createElement("textarea",{className:"artwork_instructions",id:"artwork_instructions_"+n.id,ref:"artworkInstructions",name:"artworkInstructions",onChange:this.fieldChanged,placeholder:t("artwork_instructions_placeholder"),value:n.artworkInstructions}))}},{key:"fileNameValue",value:function(e,t){return e&&Object.keys(e).length>0&&e.fileName?e.fileName:t}},{key:"triggerFileInput",value:function(){var e=D.default.findDOMNode(this.refs._fileUploadInput);null!=e&&e.click()}},{key:"handleUpload",value:function(e){var t=e.target;null!=t&&this.props.dispatch((0,k.uploadFile)(t.files[0]))}},{key:"onDragEnter",value:function(){this.setState({hovering:!0})}},{key:"onDragLeave",value:function(){this.setState({hovering:!1})}},{key:"onDrop",value:function(e,t){this.setState({hovering:!1}),e.length>0&&this.props.dispatch((0,k.uploadFile)(e[0]))}},{key:"fieldChanged",value:function(e){if("empty"!==this.props.artwork.type){var t=e.target;null!=t&&this.props.dispatch((0,k.updateArtwork)(t.name,t.value,this.props.artwork.id))}}}]),t}(_.Component);t.default=A},547:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=r(507),s=(n(l),r(326)),c=n(s),d=r(548),f=r(531),p=function(e){function t(e){o(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.renderColor=r.renderColor.bind(r),r.colorChanged=r.colorChanged.bind(r),r}return i(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=(e.artwork,e.colors),r=e.locale,n=function(e){return(0,d.translate)(e,{locale:r,scope:"artwork_uploader"})};return t&&t.length?c.default.createElement("div",null,c.default.createElement("label",null,n("labels.select_vinyl_color")),c.default.createElement("div",{className:"block-grid-2 block-grid-sm-"+t.length},t.map(this.renderColor))):c.default.createElement("div",null)}},{key:"renderColor",value:function(e){var t=this.props,r=t.artwork,n=t.locale,o="color_"+r.id+"_"+e[0],a=function(e){return(0,d.translate)(e,{locale:n,scope:"artwork_uploader"})};return c.default.createElement("div",{className:"color",key:o},c.default.createElement("input",{type:"radio",ref:"color",id:o,name:"color_"+r.id,checked:r.color===e[0],onChange:this.colorChanged,value:e[0]}),c.default.createElement("label",{className:"color-"+e[0]+" br-4",htmlFor:o},a("colors."+e[0])))}},{key:"colorChanged",value:function(e){var t=this.props.artwork,r=e.target;null!=r&&this.props.dispatch((0,f.updateArtwork)("color",r.value,t.id))}}]),t}(s.Component);t.default=p},548:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(346);Object.defineProperty(t,"intlNumber",{enumerable:!0,get:function(){return o.intlNumber}}),Object.defineProperty(t,"translate",{enumerable:!0,get:function(){return n(o).default}})},549:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(326),a=n(o),i=r(550),u=n(i),l=r(548),s=r(532),c=r(512);t.default=function(e){var t=e.dispatch,r=e.masters,n=e.selectedMasterId,o=e.locale,i=function(e){return(0,l.translate)(e,{locale:o,scope:"artwork_uploader"})},d=function(e){var r=+e===+n?null:e;t((0,s.setSelectedMasterId)(r)),window.setTimeout(function(){var e=document.querySelector(".artwork-form-fields");e&&(0,c.scrollToElement)(e)},200)},f=function(e){return e===n},p=function(e){return a.default.createElement("li",{key:"master_"+e.id},a.default.createElement("div",{className:"artwork-image-wrapper "+(f(e.id)?"selected":""),onClick:d.bind(null,e.id)},f(e.id)?a.default.createElement(u.default,{name:"ok"}):null,a.default.createElement("div",{className:"artwork-image",style:{backgroundImage:"url('"+e.preview.url+"')"}})))},h=function(){t((0,s.fetchMasters)(r.page+1))},v=r.page<r.totalCount/r.perPage;return a.default.createElement("div",{id:"previous-designs"},a.default.createElement("h3",null,i("use_a_previous_design")),a.default.createElement("ul",{className:"block-grid-2 block-grid-sm-4 block-grid-md-5 block-grid-center compressed-html"},r.nodes.map(p)),r.loading?a.default.createElement("div",{className:"loading-state center-text loading loading-medium loading-dim"}):null,v?a.default.createElement("button",{type:"button",className:"button small light",onClick:h,disabled:r.loading},i("see_more_items")):null)}},551:function(e,t,r){!function(t,n){e.exports=n(r(326),r(454))}(this,function(e,t){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){(function(n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function i(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function c(e,t){return"application/x-moz-file"===e.type||(0,y.default)(e,t)}Object.defineProperty(t,"__esModule",{value:!0});var d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},f=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),p=r(2),h=o(p),v=r(3),m=o(v),g=r(4),y=o(g),_=r(5),b=o(_),E="undefined"==typeof document||!document||!document.createElement||"multiple"in document.createElement("input"),D=function(e){function t(e,r){u(this,t);var n=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.renderChildren=function(e,t,r){return"function"==typeof e?e(d({},n.state,{isDragActive:t,isDragReject:r})):e},n.onClick=n.onClick.bind(n),n.onDocumentDrop=n.onDocumentDrop.bind(n),n.onDragStart=n.onDragStart.bind(n),n.onDragEnter=n.onDragEnter.bind(n),n.onDragLeave=n.onDragLeave.bind(n),n.onDragOver=n.onDragOver.bind(n),n.onDrop=n.onDrop.bind(n),n.onFileDialogCancel=n.onFileDialogCancel.bind(n),n.setRef=n.setRef.bind(n),n.setRefs=n.setRefs.bind(n),n.onInputElementClick=n.onInputElementClick.bind(n),n.isFileDialogActive=!1,n.state={draggedFiles:[],acceptedFiles:[],rejectedFiles:[]},n}return s(t,e),f(t,null,[{key:"onDocumentDragOver",value:function(e){e.preventDefault()}}]),f(t,[{key:"componentDidMount",value:function(){var e=this.props.preventDropOnDocument;this.dragTargets=[],e&&(document.addEventListener("dragover",t.onDocumentDragOver,!1),document.addEventListener("drop",this.onDocumentDrop,!1)),this.fileInputEl.addEventListener("click",this.onInputElementClick,!1),document.body.onfocus=this.onFileDialogCancel}},{key:"componentWillUnmount",value:function(){var e=this.props.preventDropOnDocument;e&&(document.removeEventListener("dragover",t.onDocumentDragOver),document.removeEventListener("drop",this.onDocumentDrop)),this.fileInputEl.removeEventListener("click",this.onInputElementClick,!1),document.body.onfocus=null}},{key:"onDocumentDrop",value:function(e){this.node.contains(e.target)||(e.preventDefault(),this.dragTargets=[])}},{key:"onDragStart",value:function(e){this.props.onDragStart&&this.props.onDragStart.call(this,e)}},{key:"onDragEnter",value:function(e){e.preventDefault(),this.dragTargets.indexOf(e.target)===-1&&this.dragTargets.push(e.target),this.setState({draggedFiles:(0,b.default)(e)}),this.props.onDragEnter&&this.props.onDragEnter.call(this,e)}},{key:"onDragOver",value:function(e){e.preventDefault(),e.stopPropagation();try{e.dataTransfer.dropEffect="copy"}catch(e){}return this.props.onDragOver&&this.props.onDragOver.call(this,e),!1}},{key:"onDragLeave",value:function(e){var t=this;e.preventDefault(),this.dragTargets=this.dragTargets.filter(function(r){return r!==e.target&&t.node.contains(r)}),this.dragTargets.length>0||(this.setState({draggedFiles:[]}),this.props.onDragLeave&&this.props.onDragLeave.call(this,e))}},{key:"onDrop",value:function e(t){var r=this,o=this.props,e=o.onDrop,a=o.onDropAccepted,u=o.onDropRejected,l=o.multiple,s=o.disablePreview,d=o.accept,f=(0,b.default)(t),p=[],h=[];t.preventDefault(),this.dragTargets=[],this.isFileDialogActive=!1,f.forEach(function(e){if(!s)try{e.preview=window.URL.createObjectURL(e)}catch(t){"production"!==n.env.NODE_ENV&&console.error("Failed to generate preview for file",e,t)}c(e,d)&&r.fileMatchSize(e)?p.push(e):h.push(e)}),l||h.push.apply(h,i(p.splice(1))),e&&e.call(this,p,h,t),h.length>0&&u&&u.call(this,h,t),p.length>0&&a&&a.call(this,p,t),this.draggedFiles=null,this.setState({draggedFiles:[],acceptedFiles:p,rejectedFiles:h})}},{key:"onClick",value:function e(t){var r=this.props,e=r.onClick,n=r.disableClick;n||(t.stopPropagation(),e&&e.call(this,t),setTimeout(this.open.bind(this),0))}},{key:"onInputElementClick",value:function(e){e.stopPropagation(),this.props.inputProps&&this.props.inputProps.onClick&&this.props.inputProps.onClick()}},{key:"onFileDialogCancel",value:function e(){var e=this.props.onFileDialogCancel,t=this.fileInputEl,r=this.isFileDialogActive;e&&r&&setTimeout(function(){var n=t.files;n.length||(r=!1,e())},300)}},{key:"setRef",value:function(e){this.node=e}},{key:"setRefs",value:function(e){this.fileInputEl=e}},{key:"fileMatchSize",value:function(e){return e.size<=this.props.maxSize&&e.size>=this.props.minSize}},{key:"allFilesAccepted",value:function(e){var t=this;return e.every(function(e){return c(e,t.props.accept)})}},{key:"open",value:function(){this.isFileDialogActive=!0,this.fileInputEl.value=null,this.fileInputEl.click()}},{key:"render",value:function(){var e=this.props,t=e.accept,r=e.activeClassName,n=e.inputProps,o=e.multiple,i=e.name,u=e.rejectClassName,l=e.children,s=a(e,["accept","activeClassName","inputProps","multiple","name","rejectClassName","children"]),c=s.activeStyle,f=s.className,p=s.rejectStyle,v=s.style,m=a(s,["activeStyle","className","rejectStyle","style"]),g=this.state.draggedFiles,y=g.length,_=o||y<=1,b=y>0&&this.allFilesAccepted(g),D=y>0&&(!b||!_);f=f||"",b&&r&&(f+=" "+r),D&&u&&(f+=" "+u),f||v||c||p||(v={width:200,height:200,borderWidth:2,borderColor:"#666",borderStyle:"dashed",borderRadius:5},c={borderStyle:"solid",borderColor:"#6c6",backgroundColor:"#eee"},p={borderStyle:"solid",borderColor:"#c66",backgroundColor:"#eee"});var w=void 0;w=c&&b?d({},v,c):p&&D?d({},v,p):d({},v);var k={accept:t,type:"file",style:{display:"none"},multiple:E&&o,ref:this.setRefs,onChange:this.onDrop};i&&i.length&&(k.name=i);var O=["acceptedFiles","preventDropOnDocument","disablePreview","disableClick","onDropAccepted","onDropRejected","onFileDialogCancel","maxSize","minSize"],A=d({},m);return O.forEach(function(e){return delete A[e]}),h.default.createElement("div",d({className:f,style:w},A,{onClick:this.onClick,onDragStart:this.onDragStart,onDragEnter:this.onDragEnter,onDragOver:this.onDragOver,onDragLeave:this.onDragLeave,onDrop:this.onDrop,ref:this.setRef}),this.renderChildren(l,b,D),h.default.createElement("input",d({},n,k)))}}]),t}(h.default.Component);D.propTypes={accept:m.default.string,children:m.default.oneOfType([m.default.node,m.default.func]),disableClick:m.default.bool,disablePreview:m.default.bool,preventDropOnDocument:m.default.bool,inputProps:m.default.object,multiple:m.default.bool,name:m.default.string,maxSize:m.default.number,minSize:m.default.number,className:m.default.string,activeClassName:m.default.string,rejectClassName:m.default.string,style:m.default.object,activeStyle:m.default.object,rejectStyle:m.default.object,onClick:m.default.func,onDrop:m.default.func,onDropAccepted:m.default.func,onDropRejected:m.default.func,onDragStart:m.default.func,onDragEnter:m.default.func,onDragOver:m.default.func,onDragLeave:m.default.func,onFileDialogCancel:m.default.func},D.defaultProps={preventDropOnDocument:!0,disablePreview:!1,disableClick:!1,multiple:!0,maxSize:1/0,minSize:0},t.default=D,e.exports=t.default}).call(t,r(1))},function(e,t){function r(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function o(e){if(c===setTimeout)return setTimeout(e,0);if((c===r||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function a(e){if(d===clearTimeout)return clearTimeout(e);if((d===n||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function i(){v&&p&&(v=!1,p.length?h=p.concat(h):m=-1,h.length&&u())}function u(){if(!v){var e=o(i);v=!0;for(var t=h.length;t;){for(p=h,h=[];++m<t;)p&&p[m].run();m=-1,t=h.length}p=null,v=!1,a(e)}}function l(e,t){this.fun=e,this.array=t}function s(){}var c,d,f=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:r}catch(e){c=r}try{d="function"==typeof clearTimeout?clearTimeout:n}catch(e){d=n}}();var p,h=[],v=!1,m=-1;f.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];h.push(new l(e,t)),1!==h.length||v||o(u)},l.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=s,f.addListener=s,f.once=s,f.off=s,f.removeListener=s,f.removeAllListeners=s,f.emit=s,f.prependListener=s,f.prependOnceListener=s,f.listeners=function(e){return[]},f.binding=function(e){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(e){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(t,r){t.exports=e},function(e,r){e.exports=t},function(e,t){e.exports=function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";t.__esModule=!0,r(8),r(9),t.default=function(e,t){if(e&&t){var r=function(){var r=Array.isArray(t)?t:t.split(","),n=e.name||"",o=e.type||"",a=o.replace(/\/.*$/,"");return{v:r.some(function(e){var t=e.trim();return"."===t.charAt(0)?n.toLowerCase().endsWith(t.toLowerCase()):/\/\*$/.test(t)?a===t.replace(/\/.*$/,""):o===t})}}();if("object"==typeof r)return r.v}return!0},e.exports=t.default},function(e,t){var r=e.exports={version:"1.2.2"};"number"==typeof __e&&(__e=r)},function(e,t){var r=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(e,t,r){var n=r(2),o=r(1),a=r(4),i=r(19),u="prototype",l=function(e,t){return function(){return e.apply(t,arguments)}},s=function(e,t,r){var c,d,f,p,h=e&s.G,v=e&s.P,m=h?n:e&s.S?n[t]||(n[t]={}):(n[t]||{})[u],g=h?o:o[t]||(o[t]={});h&&(r=t);for(c in r)d=!(e&s.F)&&m&&c in m,f=(d?m:r)[c],p=e&s.B&&d?l(f,n):v&&"function"==typeof f?l(Function.call,f):f,m&&!d&&i(m,c,f),g[c]!=f&&a(g,c,p),v&&((g[u]||(g[u]={}))[c]=f)};n.core=o,s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,e.exports=s},function(e,t,r){var n=r(5),o=r(18);e.exports=r(22)?function(e,t,r){return n.setDesc(e,t,o(1,r))}:function(e,t,r){return e[t]=r,
e}},function(e,t){var r=Object;e.exports={create:r.create,getProto:r.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:r.getOwnPropertyDescriptor,setDesc:r.defineProperty,setDescs:r.defineProperties,getKeys:r.keys,getNames:r.getOwnPropertyNames,getSymbols:r.getOwnPropertySymbols,each:[].forEach}},function(e,t){var r=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++r+n).toString(36))}},function(e,t,r){var n=r(20)("wks"),o=r(2).Symbol;e.exports=function(e){return n[e]||(n[e]=o&&o[e]||(o||r(6))("Symbol."+e))}},function(e,t,r){r(26),e.exports=r(1).Array.some},function(e,t,r){r(25),e.exports=r(1).String.endsWith},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){var r={}.toString;e.exports=function(e){return r.call(e).slice(8,-1)}},function(e,t,r){var n=r(10);e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,o){return e.call(t,r,n,o)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,r){e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r(7)("match")]=!1,!"/./"[e](t)}catch(e){}}return!0}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,r){var n=r(16),o=r(11),a=r(7)("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[a])?!!t:"RegExp"==o(e))}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,r){var n=r(2),o=r(4),a=r(6)("src"),i="toString",u=Function[i],l=(""+u).split(i);r(1).inspectSource=function(e){return u.call(e)},(e.exports=function(e,t,r,i){"function"==typeof r&&(o(r,a,e[t]?""+e[t]:l.join(String(t))),"name"in r||(r.name=t)),e===n?e[t]=r:(i||delete e[t],o(e,t,r))})(Function.prototype,i,function(){return"function"==typeof this&&this[a]||u.call(this)})},function(e,t,r){var n=r(2),o="__core-js_shared__",a=n[o]||(n[o]={});e.exports=function(e){return a[e]||(a[e]={})}},function(e,t,r){var n=r(17),o=r(13);e.exports=function(e,t,r){if(n(t))throw TypeError("String#"+r+" doesn't accept regex!");return String(o(e))}},function(e,t,r){e.exports=!r(15)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){var r=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:r)(e)}},function(e,t,r){var n=r(23),o=Math.min;e.exports=function(e){return e>0?o(n(e),9007199254740991):0}},function(e,t,r){"use strict";var n=r(3),o=r(24),a=r(21),i="endsWith",u=""[i];n(n.P+n.F*r(14)(i),"String",{endsWith:function(e){var t=a(this,e,i),r=arguments,n=r.length>1?r[1]:void 0,l=o(t.length),s=void 0===n?l:Math.min(o(n),l),c=String(e);return u?u.call(t,c,s):t.slice(s-c.length,s)===c}})},function(e,t,r){var n=r(5),o=r(3),a=r(1).Array||Array,i={},u=function(e,t){n.each.call(e.split(","),function(e){void 0==t&&e in a?i[e]=a[e]:e in[]&&(i[e]=r(12)(Function.call,[][e],t))})};u("pop,reverse,shift,keys,values,entries",1),u("indexOf,every,some,forEach,map,filter,find,findIndex,includes",3),u("join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill"),o(o.S,"Array",i)}])},function(e,t){"use strict";function r(e){var t=[];if(e.dataTransfer){var r=e.dataTransfer;r.files&&r.files.length?t=r.files:r.items&&r.items.length&&(t=r.items)}else e.target&&e.target.files&&(t=e.target.files);return Array.prototype.slice.call(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,e.exports=t.default}])})},552:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(326),a=n(o);t.default=function(e){var t=e.percent,r=e.id;return a.default.createElement("div",{className:"progress-bar"+(t>=100?" finishing":""),id:"progress_bar_"+(null==r?"default":r)},a.default.createElement("span",{style:{width:t+"%"}}))}},553:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=r(326),s=n(l),c=r(331),d=n(c),f=r(507),p=(n(f),function(e){function t(e){o(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.forwardUploadEvent=r.forwardUploadEvent.bind(r),r.triggerFileInput=r.triggerFileInput.bind(r),r}return i(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.id,r=e.artwork,n=e.t;return s.default.createElement("div",{className:"center-block"},s.default.createElement("div",{id:"choose_file_"+t,className:"field file"},s.default.createElement("input",{type:"file",name:"file",id:"file_input_"+t,ref:"_fileUploadInput",onChange:this.forwardUploadEvent}),s.default.createElement("div",{className:"fake"},s.default.createElement("button",{className:"button small blue choose-file",type:"button",onClick:this.triggerFileInput},n("choose_file")),s.default.createElement("span",{className:"file-input-wrapper"},s.default.createElement("input",{disabled:"disabled",ref:"chosenFileName",type:"text",value:this.fileNameValue(r,n("no_file_chosen")),onClick:this.triggerFileInput})))))}},{key:"forwardUploadEvent",value:function(e){var t=e.target;if(null!=t){var r=t.files;r.length>0&&this.props.triggerUpload(e)}}},{key:"fileNameValue",value:function(e,t){return e&&e.fileName?e.fileName:t}},{key:"triggerFileInput",value:function(){var e=d.default.findDOMNode(this.refs._fileUploadInput);null!=e&&e.click()}}]),t}(l.Component));t.default=p},554:function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.hasPickedColors=t.anyFailed=t.allSelected=t.allUploaded=t.toParams=t.STATE_COMPLETED=t.STATE_FAILED=t.STATE_UPLOADING=t.STATE_PENDING=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=r(376),i=r(386),u=r(541),l=r(555),s=n(l),c=t.STATE_PENDING="pending",d=(t.STATE_UPLOADING="uploading",t.STATE_FAILED="failed"),f=t.STATE_COMPLETED="completed";t.toParams=function(e){var t={artwork_instructions:e.artworkInstructions};return e.state===f&&(t=o({},t,{artwork_file_name:e.normalizedFileName,artwork_path:e.artworkPath})),s.ATTRIBUTES.forEach(function(r){e[r]&&(t=(0,u.assocPath)(["production_metadata",r],e[r],o({production_metadata:{}},t)))}),(0,i.filter)(i.present,t)},t.allUploaded=function(e){return!(!e||0===e.length)&&(0,i.all)(function(e){return e.state===f},e)},t.allSelected=function(e){return!(!e||0===e.length)&&!(0,a.some)(e,function(e){return e.state===c})},t.anyFailed=function(e){return!(!e||0===e.length)&&(0,a.some)(e,function(e){return e.state===d})},t.hasPickedColors=function(e,t){return(0,i.all)(function(e){return void 0===e.colors},e)||(0,i.all)(function(e){return void 0!==e.color},t)}},555:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ATTRIBUTES=["color","units_per_roll"]},556:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=r(507),s=(n(l),r(326)),c=n(s),d=r(484),f=n(d),p=r(548),h=r(531),v=function(e){function t(e){o(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.handleSubmit=r.handleSubmit.bind(r),r}return i(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.locale,r=e.visible,n=function(e){return(0,p.translate)(e,{locale:t,scope:"artwork_uploader"})};return c.default.createElement(f.default,{id:"failed-upload-modal",visible:r},c.default.createElement("h2",null,n("upload_failed_title")),c.default.createElement("p",null,n("upload_failed_body")),c.default.createElement("button",{className:"medium blue",onClick:this.handleSubmit},n("send_artwork_after_checkout")))}},{key:"handleSubmit",value:function(){this.props.dispatch((0,h.submitArtworks)())}}]),t}(s.Component);t.default=v},557:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.updateMissingArtwork=t.processArtwork=void 0;var o=r(428),a=n(o),i=r(531),u=r(376),l=t.processArtwork=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:s;t.edit?n(t).then(function(e){window.location=e.body.location}).catch(function(e){r(e)}):e((0,i.submitArtworks)())},s=t.updateMissingArtwork=function(e){var t=(0,u.last)(e.artworks.uploadedFiles)||{},r=e.selectedMasterId;return a.default.put(e.endpoint).send({id:e.lineItemId,artwork_file_name:t.normalizedFileName,artwork_path:t.artworkPath,artwork_instructions:t.artworkInstructions||r&&e.artworks.artworkInstructions,state:t.state,normalized_file_name:t.normalizedFileName,percentage:t.percentage,master_id:r})};t.default={processArtwork:l,updateMissingArtwork:s}},558:function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(349),i=r(370),u=o(i),l=r(559),s=n(l),c=[u.default],d=a.applyMiddleware.apply(void 0,c)(a.createStore),f=(0,a.combineReducers)(s);t.default=function(e){return d(f,e)}},559:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.artworks=t.repurposedArtwork=t.selectedMasterId=t.masters=t.productId=t.reorderItems=t.artisanApiOptions=t.unitsPerRoll=t.userId=t.edit=t.product=t.width=t.variant=t.uploads=t.scope=t.sample=t.quantity=t.orderNumber=t.locale=t.lineItemId=t.httpMethod=t.height=t.endpoint=t.guest=t.config=void 0;var o=r(560),a=n(o),i=r(561);t.config=function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e},t.guest=function e(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e},t.endpoint=function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/orders/populate";return e},t.height=function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e},t.httpMethod=function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"POST";return e},t.lineItemId=function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e},t.locale=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en";return e},t.orderNumber=function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e},t.quantity=function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return e},t.sample=function e(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e},t.scope=function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"artwork_uploader";return e},t.uploads=function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e},t.variant=function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e},t.width=function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e},t.product=function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e},t.edit=function e(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e},t.userId=function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e},t.unitsPerRoll=function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e},t.artisanApiOptions=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{endpoint:"",token:""};return e},t.reorderItems=function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e},t.productId=function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e};t.masters=i.masters,t.selectedMasterId=i.selectedMasterId,t.repurposedArtwork=i.repurposedArtwork;t.artworks=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:"noop"},e=t;return e=(0,a.default)(e,r)}},560:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=r(376),a=r(541),i=r(401),u=r(554),l=r(534),s=function(e,t){var r=t.artwork,o=e.uploadedFiles;return n({},e,{uploadedFiles:o.concat([r])})},c=function(e,t){var r=e.uploadedFiles,o=r.find(function(e){return e.id===t.artworkId}),l=n({},o,{fileName:t.file.name,normalizedFileName:t.normalizedFileName,state:u.STATE_UPLOADING,artworkPath:t.artworkPath});return n({},e,{uploadedFiles:(0,i.set)((0,a.find)(o),l,r)})},d=function(e,t){var r=e.uploadedFiles,o=r.find(function(e){return e.id===t.artworkId}),l=n({},o,{state:u.STATE_FAILED});return n({},e,{uploadedFiles:(0,i.set)((0,a.find)(o),l,r)})},f=function(e,t){var r=e.uploadedFiles,o=r.find(function(e){return e.id===t.artworkId}),l=n({},o,{state:u.STATE_COMPLETED,percentage:100});return n({},e,{uploadedFiles:(0,i.set)((0,a.find)(o),l,r)})},p=function(e,t){var r=e.uploadedFiles,o=r.find(function(e){return e.id===t.artworkId}),u=n({},o,{percentage:t.percentage});return n({},e,{uploadedFiles:(0,i.set)((0,a.find)(o),u,r)})},h=function(e,t){var r=e.uploadedFiles,u=r.find(function(e){return e.id===t.artworkId}),l=n({},u,(0,o.omit)(t,"type","artworkId")),s=l.artworkInstructions;return n({},e,{uploadedFiles:(0,i.set)((0,a.find)(u),l,r),artworkInstructions:s})};t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:"noop"},r=e,n=function(e,t){return e||{}};switch(t.type){case l.ADD_ARTWORK:n=s;break;case l.UPLOAD_FILE:n=c;break;case l.UPLOAD_FAILED:n=d;break;case l.UPLOAD_SUCCEEDED:n=f;break;case l.UPLOAD_PROGRESS:n=p;break;case l.UPDATE_ARTWORK:n=h}return n(r,t)}},561:function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(t,"__esModule",{value:!0}),t.repurposedArtwork=t.selectedMasterId=t.masters=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=r(532),i=r(534),u=r(376),l={totalCount:0,page:1,loading:!1,nodes:[]},s=function(e,t){return o({},e,{loading:!0})},c=function(e,t){var r=e.nodes.concat(t.masters.nodes),n=(0,u.uniq)(r,"id");return o({},t.masters,{nodes:n})};t.masters=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:"noop"},o=(t={},n(t,a.MASTERS_LOADING,s),n(t,a.MASTERS_LOADED,c),t)[r.type];return o?o(e,r):e||l},t.selectedMasterId=function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:"noop"};return t.type===a.SELECTED_MASTER_ID?t.masterId:t.type===i.ADD_ARTWORK?null:e},t.repurposedArtwork=function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:"noop"};if(t.type===a.SET_REPURPOSED_ARTWORK)return t.artwork;if(t.type===i.UPDATE_ARTWORK&&e&&e.id===t.artworkId){var r=(0,u.omit)(t,"type","artworkId");return o({},e,r)}return t.type===i.ADD_ARTWORK?null:e}}});